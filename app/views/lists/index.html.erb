<% if @important.try(:any?) %>

<h2>Most important</h2>
<table id="most_important" class="table">
  <thead>
  <tr>
    <th>Task</th>
    <th>List</th>
    <th>Priority</th>
    <th colspan="2"></th>
  </tr>
  </thead>

  <tbody>
  <% @important.each do |task| %>
    <tr>
      <td><%= task.name %></td>
      <td><%= task.list.name %></td>
      <td><%= task.priority %></td>
      <td><%= link_to 'Complete', complete_list_task_path(task.list, task), method: :post, class: 'btn btn-success' %></td>
      <td><%= link_to 'Remove', [task.list, task], method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-danger'  %></td>
    </tr>
  <% end %>
  </tbody>
</table>

<% end %>

<h2>Lists <%= link_to 'New', new_list_path, class: 'btn btn-success' %></h2>

<table id="lists_table" class="table">
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Tasks</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @lists.each do |list| %>
      <tr>
        <td><%= list.name %></td>
        <td><%= list.description %></td>
        <td><%= list.tasks.count %></td>
        <td><%= link_to 'Show', list, class: 'btn btn-default' %></td>
        <td><%= link_to 'Edit', edit_list_path(list), class: 'btn btn-warning'  %></td>
        <td><%= link_to 'Remove', list, method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-danger'  %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>
